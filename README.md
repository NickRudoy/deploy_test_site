# Скрипт развертывания сайта

Этот проект представляет собой модульный bash-скрипт для автоматизированного развертывания сайтов с поддержкой различных CMS и систем контроля версий.

## Особенности

- Модульная архитектура
- Поддержка различных окружений (выделенный сервер, VPS, виртуальный и shared хостинг)
- Интеграция с GitLab
- Поддержка различных CMS (WordPress, Drupal, Joomla, Bitrix, OpenCart, ModX)
- Расширенное логирование
- Мониторинг производительности
- Проверки безопасности
- Автоматическое создание бэкапов

## Структура проекта

```
.
├── deploy_custom_site.sh      # Основной скрипт
├── scripts/                   # Директория с модулями
│   ├── config.sh             # Конфигурационные параметры
│   ├── logging.sh            # Функции логирования
│   ├── validation.sh         # Функции валидации и безопасности
│   ├── monitoring.sh         # Функции мониторинга
│   ├── git.sh                # Функции работы с Git
│   └── gitignore.sh          # Функции управления .gitignore
└── README.md                 # Документация
```

## Требования

- Bash версии 4.0 или выше
- Git
- SSH-клиент
- Утилиты: curl, wget, rsync (опционально)
- Права на создание директорий и файлов

## Установка

1. Клонируйте репозиторий:
```bash
git clone [URL репозитория]
```

2. Сделайте скрипт исполняемым:
```bash
chmod +x deploy_custom_site.sh
```

3. Убедитесь, что все модули в директории scripts также имеют права на исполнение:
```bash
chmod +x scripts/*.sh
```

## Использование

### Базовое использование

```bash
./deploy_custom_site.sh
```

### Параметры окружения

Скрипт поддерживает следующие типы окружений:
1. Выделенный сервер (root доступ)
2. VPS (root доступ)
3. Виртуальный хостинг (без root доступа)
4. Shared хостинг (ограниченный доступ)

### Настройка Git

Скрипт автоматически настраивает:
- SSH-подключение к GitLab
- Конфигурацию Git
- Создание и настройку репозитория
- Управление ветками
- Настройку .gitignore для различных CMS

### Мониторинг

Встроенные функции мониторинга отслеживают:
- Использование CPU
- Использование памяти
- Использование диска
- Производительность сети
- Статус процессов

### Безопасность

Реализованы следующие меры безопасности:
- Валидация всех входных данных
- Проверка прав доступа
- Безопасное хранение конфиденциальных данных
- Создание резервных копий
- Проверка обновлений безопасности

## Конфигурация

### Основные параметры

Все основные параметры находятся в файле `scripts/config.sh`:
- Параметры GitLab
- Настройки веб-сервера
- Пути к директориям
- Параметры безопасности

### Логирование

Уровни логирования:
- DEBUG (0)
- INFO (1)
- WARN (2)
- ERROR (3)

## Поддерживаемые CMS

Скрипт включает предварительно настроенные шаблоны для:
- WordPress
- Drupal
- Joomla
- Bitrix
- OpenCart
- ModX

## Резервное копирование

Автоматически создаются резервные копии:
- Перед внесением изменений
- При обновлении конфигурации
- При изменении репозитория

## Обработка ошибок

- Подробное логирование всех ошибок
- Создание отчетов об ошибках
- Возможность повтора операций
- Автоматическое восстановление из резервных копий

## Оптимизация

Встроенные функции оптимизации:
- Очистка кэша
- Оптимизация базы данных
- Очистка временных файлов
- Ротация логов

## Разработка

### Добавление новых модулей

1. Создайте новый файл в директории scripts/
2. Добавьте необходимые функции
3. Подключите модуль в основном скрипте

### Стиль кода

- Используйте отступы в 4 пробела
- Комментируйте сложные участки кода
- Следуйте принципам модульности
- Используйте говорящие имена переменных и функций

## Лицензия

MIT License

## Авторы

[Ваше имя/организация]

## Поддержка

При возникновении проблем:
1. Проверьте логи в директории logs/
2. Убедитесь, что все зависимости установлены
3. Проверьте права доступа
4. Создайте issue в репозитории
